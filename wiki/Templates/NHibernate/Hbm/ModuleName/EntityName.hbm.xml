<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" schema="$=table.Database.Name$">
	<class name="Interpress.Entities.$=util.Cap(table.Database.Name)$.$=util.Cap(table.Name)$, Interpress.Entities" table="$=table.Name$" $=(table.IsView?'mutable="false"':'dynamic-update="true"')$>
		<cache usage="$=(table.IsView?'read-only':'read-write')$" region="$=table.Database.Name$.$=table.Name$"/>

		<id name="$=(table.PrimaryColumn?util.Cap(table.PrimaryColumn.Name):'Id')$" column="$=(table.PrimaryColumn?table.PrimaryColumn.Name:'id')$" type="long" unsaved-value="-1">
			<generator class="native" />
		</id>

$
foreach(field in table.Columns){ 
	if(field.IsPrimaryKey || field.Name=='id') continue;
$
		<property name="$=util.Cap(field.Name)$" column="$=field.Name$" type="$=util.CSType(field.ColumnType.ToString())$" />
$ } $

$ 
foreach(field in table.Columns){ 
	if(field.ReferenceColumn){ 
$
		<many-to-one name="$=util.Cap(field.ReferenceColumn.Table.Name)$" column="$=field.Name$" not-found="ignore" fetch="join" insert="false" update="false" />
$ }} $

$ 
if(table.IsView==false)
{
	foreach(tbl in table.Database.Tables){ 
		foreach(field in tbl.Columns){ 
			if(field.ReferenceColumn) {
				if(field.ReferenceColumn.Table.Name==table.Name && field.ReferenceColumn.Name==table.PrimaryColumn.Name){ 
	$
     <bag name="$=util.Cap(tbl.Name)$Listesi" 
          lazy="true"
          table="$=tbl.Name$" inverse="true" 
          cascade="All" >
       <key column="$=table.PrimaryColumn.Name$"/>
       <one-to-many class="Interpress.Entities.$=util.Cap(tbl.Database.Name)$.$=util.Cap(tbl.Name)$, Interpress.Entities"  not-found="ignore" />
     </bag>
$ }}}}} $

	</class>
</hibernate-mapping>